# Discord Bot - Watermark Management Bot

## 概要
このDiscord Botは、各チャンネルごとにウォーターマークを設定し、画像に透かしを自動適用する機能を提供します。
 - お問い合わせ：専用Discordチャンネルにてお願いします：[Robonch](https://discord.gg/jddAc3FJ53)

### botの使用方法
1. 初期設定 **`/wm_set`**
 - 現在のチャンネルに透かし画像を設定します。
 - **使い方**:
   1. コマンドと一緒に画像を添付して送信します。
   2. 設定された画像はチャンネルごとに１つだけ保存できます（古いものは上書き）
     - 他の透かし画像も設定したい場合は別途チャンネルを作成して設定ください。
→ これが完了したらもうbotを使用する準備は整っています！画像ファイルを貼ってみてください！

2. 設定確認 **`/wm_check`**
 - 現在のチャンネルで設定されている透かし画像と透過度を表示します。
 - **表示例**:
    - 透過度: `50%` (デフォルト`15%`)
    - 設定された透かし画像を送信します。

3. 透過度変更 **`/wm_settp`**
 - 現在のチャンネルの透過度を設定します。
 - **使い方**:
   1. コマンドと一緒に透過度（1～100の半角整数）を指定します。
   2. 指定した透過度は、透かし画像に適用されます。
   3. 例: `/settp 30`（ → 透過度30%に設定）

4. 設定削除 **`/wm_clear`**
 - 現在のチャンネルで設定されている透かし画像を削除します。

---
## 開発者向け情報

### 環境変数
- **`DISCORD_TOKEN`**: Discord Botのトークン。
- **`COMMAND_PREFIX`**: Botのコマンドプレフィックス
- **`BASE_DIR`**: Botが設定データや一時ファイルを保存するディレクトリ。

---

### 使用方法

1. `.env`ファイルを作成し、以下のように記述します。

```env
DISCORD_TOKEN=your_discord_bot_token
COMMAND_PREFIX=/
BASE_DIR=./data
```

2. 必要なPythonライブラリをインストールします。

```bash
pip install -r requirements.txt
```

3. Botを起動します。

```bash
python bot.py
```

4. BotをDiscordサーバーに招待し、コマンドを使用して透かしを管理します。

---

## 今後の課題

1. **メッセージの多言語化**
   - 少なくとも英語と日本語に対応し、ユーザーが使用する言語に合わせたメッセージを表示する。

2. **自然な言語設定の選択**
   - Discordユーザーの設定言語を読み取り、適切な言語でメッセージを表示する仕組みの導入。

3. **メッセージのサジェスト機能**
   - スラッシュコマンドや入力補完を活用し、ユーザーが利用可能なコマンドやオプションを簡単に選択できるようにする。

---

## 既知の問題

1. **透過情報を持つgif形式への対応**
   - 残像が残る問題があるため、`src/utils/watermark_processor.py`の更新必要

---

## ライセンス
このBotはMITライセンスの下で公開されています。

